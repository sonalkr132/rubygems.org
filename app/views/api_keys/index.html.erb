<% @title = 'Api keys' %>

<div class="t-body">
  <div class="table">
    <div class="row row__header">
      <div class="cell">
        Name
      </div>
      <div class="cell">
        Scope
      </div>
      <div class="cell">
        Expires in
      </div>
      <div class="cell">
      </div>
    </div>

    <% for api_key in @api_keys do %>
      <div class="row">
        <div class="cell">
          <%= api_key.name %>
        </div>
        <div class="cell">
          <%= api_key.scope %>
        </div>
        <div class="cell">
          <%= distance_of_time_in_words Time.zone.now, api_key.expires_at.to_s %>
        </div>
        <div class="cell">
          <%= link_to t('.delete'),
                      profile_api_key_path(id: api_key.id),
                      method: :delete,
                      class: "t-text t-link",
                      data: { confirm: "The API key will become invalid. Are you sure?"} %>
        </div>
      </div>
    <% end %>
  </div>

  <p><%= link_to 'New API key ðŸ¡’', new_profile_api_key_path, class: "t-text t-link" %></p>
</div>
